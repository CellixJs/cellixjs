<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-decisions/tsgo-migration" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">TypeScript Go (tsgo) Migration | CellixJs Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://cellixjs.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://cellixjs.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://cellixjs.github.io/docs/decisions/tsgo-migration"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="TypeScript Go (tsgo) Migration | CellixJs Docs"><meta data-rh="true" name="description" content="Documenting the decision to postpone the tsgo migration until TypeScript 7 and surrounding typings stabilize."><meta data-rh="true" property="og:description" content="Documenting the decision to postpone the tsgo migration until TypeScript 7 and surrounding typings stabilize."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://cellixjs.github.io/docs/decisions/tsgo-migration"><link data-rh="true" rel="alternate" href="https://cellixjs.github.io/docs/decisions/tsgo-migration" hreflang="en"><link data-rh="true" rel="alternate" href="https://cellixjs.github.io/docs/decisions/tsgo-migration" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Decisions","item":"https://cellixjs.github.io/docs/category/decisions"},{"@type":"ListItem","position":2,"name":"0023 TypeScript Go (tsgo) Migration","item":"https://cellixjs.github.io/docs/decisions/tsgo-migration"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="CellixJs Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="CellixJs Docs Atom Feed"><link rel="stylesheet" href="/assets/css/styles.207ed739.css">
<script src="/assets/js/runtime~main.777e6e33.js" defer="defer"></script>
<script src="/assets/js/main.0b5abc91.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_DZHR" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="CellixJs Logo" class="themedComponent_HpX9 themedComponent--light_jdcv"><img src="/img/logo.svg" alt="CellixJs Logo" class="themedComponent_HpX9 themedComponent--dark_OC9C"></div><b class="navbar__title text--truncate">Home</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Doc</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/CellixJs/cellixjs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_Vi6i"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_c6nT colorModeToggle_UsFn"><button class="clean-btn toggleButton_yIV_ toggleButtonDisabled_M4O5" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_qZu_ lightToggleIcon_j3iQ"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_qZu_ darkToggleIcon_nh7t"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_qZu_ systemToggleIcon_ngVt"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_hmlT"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_wj2r"><div class="docsWrapper_P1lC"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_ynJV" type="button"></button><div class="docRoot_bBuI"><aside class="theme-doc-sidebar-container docSidebarContainer_ItqY"><div class="sidebarViewport_G2ld"><div class="sidebar_WHnL"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_C6Oa"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro"><span title="Introduction üëã" class="linkLabel_V36a">Introduction üëã</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_XdN1 menu__link menu__link--sublist" href="/docs/category/technical-overview"><span title="Technical Overview" class="categoryLinkLabel_MNj7">Technical Overview</span></a><button aria-label="Expand sidebar category &#x27;Technical Overview&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_XdN1 menu__link menu__link--sublist menu__link--active" href="/docs/category/decisions"><span title="Decisions" class="categoryLinkLabel_MNj7">Decisions</span></a><button aria-label="Collapse sidebar category &#x27;Decisions&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/madr-architecture-decisions"><span title="0001 MADR Architecture Decisions" class="linkLabel_V36a">0001 MADR Architecture Decisions</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/open-telemetry"><span title="0002 Open Telemetry" class="linkLabel_V36a">0002 Open Telemetry</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/domain-driven-design"><span title="0003 Domain Driven Design" class="linkLabel_V36a">0003 Domain Driven Design</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/identity-access"><span title="0004 Identity and Access Control" class="linkLabel_V36a">0004 Identity and Access Control</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/authorization"><span title="0005 Authorization and Access Pattern" class="linkLabel_V36a">0005 Authorization and Access Pattern</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/maps"><span title="0006 Azure Maps Integration Decision" class="linkLabel_V36a">0006 Azure Maps Integration Decision</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/serenityjs"><span title="0007 SerenityJS" class="linkLabel_V36a">0007 SerenityJS</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/white-label"><span title="0008 White Label" class="linkLabel_V36a">0008 White Label</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/cache-purging"><span title="0009 Cache Purging" class="linkLabel_V36a">0009 Cache Purging</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/react-router-loaders"><span title="0010 React Router Loader" class="linkLabel_V36a">0010 React Router Loader</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/bicep"><span title="0011 Bicep" class="linkLabel_V36a">0011 Bicep</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/linter"><span title="0012 Linter Oxlint vs Biome" class="linkLabel_V36a">0012 Linter Oxlint vs Biome</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/test-suite"><span title="0013 Test Suite Selection" class="linkLabel_V36a">0013 Test Suite Selection</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/azure-infrastructure-deployments"><span title="0014 Azure Infrastructure Deployments" class="linkLabel_V36a">0014 Azure Infrastructure Deployments</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/sonarcloud"><span title="0015 SonarCloud Node16 EOL" class="linkLabel_V36a">0015 SonarCloud Node16 EOL</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/adr-template"><span title="ADR Template" class="linkLabel_V36a">ADR Template</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/sonarcloud-code-duplication-checks"><span title="0016 SonarCloud Code Duplication Checks" class="linkLabel_V36a">0016 SonarCloud Code Duplication Checks</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/adr-short-template"><span title="ADR Short Template" class="linkLabel_V36a">ADR Short Template</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/chrome-content-overrides"><span title="0017 Chrome Content Overrides" class="linkLabel_V36a">0017 Chrome Content Overrides</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/docusaurus-azure-pipeline-stages"><span title="0018 Docusaurus Azure Pipeline Stages" class="linkLabel_V36a">0018 Docusaurus Azure Pipeline Stages</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/monorepo-turborepo"><span title="0019 Monorepo Structure and Turborepo" class="linkLabel_V36a">0019 Monorepo Structure and Turborepo</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/azure-devops-monorepo-pipeline"><span title="0020 Azure DevOps Monorepo Pipeline" class="linkLabel_V36a">0020 Azure DevOps Monorepo Pipeline</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/bicep-resource-scoping-strategy"><span title="0021 Bicep Resource Scoping Strategy" class="linkLabel_V36a">0021 Bicep Resource Scoping Strategy</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/snyk-security-integration"><span title="0022 Snyk Security Integration" class="linkLabel_V36a">0022 Snyk Security Integration</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/decisions/tsgo-migration"><span title="0023 TypeScript Go (tsgo) Migration" class="linkLabel_V36a">0023 TypeScript Go (tsgo) Migration</span></a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_BCQ2"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_IiZ_"><div class="docItemContainer_TL3Y"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_AMEB" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_rCj9"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/category/decisions"><span>Decisions</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">0023 TypeScript Go (tsgo) Migration</span></li></ul></nav><div class="tocCollapsible_N6pK theme-doc-toc-mobile tocMobile_WLr4"><button type="button" class="clean-btn tocCollapsibleButton_ESX_">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>TypeScript Go (tsgo) Migration</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_A_fs" id="context-and-problem-statement">Context and Problem Statement<a href="#context-and-problem-statement" class="hash-link" aria-label="Direct link to Context and Problem Statement" title="Direct link to Context and Problem Statement" translate="no">‚Äã</a></h2>
<p>To prepare for TypeScript 7.0 and leverage advanced type checking features, we evaluated integrating <code>tsgo</code> with the <code>@typescript/native-preview</code> package. Early experimentation delivered potential benefits like stricter type checking and faster incremental builds, but the implementation introduced compatibility issues with critical dependencies (notably mongoose <code>Schema</code> typings) and required temporary workarounds that increased maintenance burden. After attempting the mongoose 9.0.1 upgrade and encountering issues from having exactOptionalPropertyTypes enabled in our tsconfig, we reverted to the 8.17.0 version and now prefer to keep the existing <code>tsc</code>-based workflow stable while TypeScript 7 matures.</p>
<h2 class="anchor anchorTargetStickyNavbar_A_fs" id="decision-drivers">Decision Drivers<a href="#decision-drivers" class="hash-link" aria-label="Direct link to Decision Drivers" title="Direct link to Decision Drivers" translate="no">‚Äã</a></h2>
<ul>
<li class=""><strong>Future Compatibility</strong>: Monitor TypeScript 7.0 while waiting for first-party stability</li>
<li class=""><strong>Enhanced Type Safety</strong>: Track <code>tsgo</code> and <code>@typescript/native-preview</code> to adopt them when the benefits outweigh the costs</li>
<li class=""><strong>Performance Balance</strong>: Avoid premature optimization if it impairs the developer experience today</li>
<li class=""><strong>Dependency Compatibility</strong>: Keep mongoose, Vitest, and other core libraries running on the officially supported TypeScript toolchain</li>
<li class=""><strong>Stability</strong>: Roll back the mongoose 9.0.1 upgrade (migrating back to 8.17.0) because the new typings triggered exactOptionalPropertyTypes issues in our tsconfig that the tsgo build could not resolve.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_A_fs" id="considered-options">Considered Options<a href="#considered-options" class="hash-link" aria-label="Direct link to Considered Options" title="Direct link to Considered Options" translate="no">‚Äã</a></h2>
<ul>
<li class="">Adopt tsgo with @typescript/native-preview immediately</li>
<li class="">Wait for official TypeScript 7.0 release</li>
<li class="">Use alternative type checking tools</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_A_fs" id="decision-outcome">Decision Outcome<a href="#decision-outcome" class="hash-link" aria-label="Direct link to Decision Outcome" title="Direct link to Decision Outcome" translate="no">‚Äã</a></h2>
<p>Chosen option: &quot;Wait for the official TypeScript 7.0 release&quot;, because the temporary compatibility workarounds (like <code>skipLibCheck</code>, mongoose type facades, and editor extensions) are more disruptive than the incremental benefits right now. We will continue to monitor tsgo and revisit the migration once the tooling and type definitions stabilize.</p>
<h3 class="anchor anchorTargetStickyNavbar_A_fs" id="consequences">Consequences<a href="#consequences" class="hash-link" aria-label="Direct link to Consequences" title="Direct link to Consequences" translate="no">‚Äã</a></h3>
<ul>
<li class="">Good, because we avoid fragile tsgo-specific workarounds across multiple packages</li>
<li class="">Good, because we reverted the mongoose upgrade back to 8.17.0 which preserves a stable dependency while we wait for tsgo/mongoose 9.x typings to catch up</li>
<li class="">Neutral, because we lose early access to TS7 features but gain confidence in the current compiler</li>
<li class="">Bad, because we defer potential compilation and runtime benefits from tsgo until later</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_A_fs" id="validation">Validation<a href="#validation" class="hash-link" aria-label="Direct link to Validation" title="Direct link to Validation" translate="no">‚Äã</a></h2>
<ul>
<li class="">We exercised <code>tsgo --build</code> across every workspace package and hit new type errors that do not occur when running <code>tsc</code> with no changes: mongoose emits a <code>TS4109</code> circular-reference failure (notably under <em>packages/ocom/data-sources-mongoose-models/dist/src/index.d.ts</em>), and our own code surfaces <code>TS2742</code> ‚Äúinferred type cannot be named‚Äù errors.</li>
<li class="">The only ways we could persuade the <code>tsgo</code> compiler to finish were enabling <code>skipLibCheck</code> everywhere (even downstream packages that never touch mongoose) or layering temporary stub mongoose typings that hid the real errors. Neither approach felt acceptable because they amount to manual workarounds for tsgo bugs instead of a stable migration path.</li>
<li class="">Because there was no way to satisfy the CI pipeline when using <code>tsgo</code> without those temporary changes, we kept the existing <code>tsc</code> workflow and decided to revisit <code>tsgo</code> once TypeScript/mongoose typings stabilize.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_A_fs" id="more-information">More Information<a href="#more-information" class="hash-link" aria-label="Direct link to More Information" title="Direct link to More Information" translate="no">‚Äã</a></h2>
<ul>
<li class="">Every <code>tsgo</code>-specific configuration was removed: <code>tsconfig</code> files extend the base config without <code>skipLibCheck</code>, package scripts call <code>tsc</code>, and temporary mongoose type facades/stubs have been deleted.</li>
<li class="">The TypeScript (Native Preview) VS Code recommendation and other editor guidance were reverted to the standard experience.</li>
<li class="">We continue to monitor TypeScript Go for resolver improvements but intend to revisit this work only once TypeScript 7.0 and the related mongoose typings (TS4109) stabilize.</li>
<li class=""><code>pnpm run verify</code> remains the benchmark for verifying the migration when it is reattempted.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_A_fs" id="future-actions">Future Actions<a href="#future-actions" class="hash-link" aria-label="Direct link to Future Actions" title="Direct link to Future Actions" translate="no">‚Äã</a></h3>
<ul>
<li class="">Track the TypeScript 7.0 release timeline and tsgo stability so we know when a second attempt makes sense.</li>
<li class="">Keep an eye on mongoose typings (TS4109) to see when the schema recursion issues resolve without requiring <code>skipLibCheck</code> or manual stubs.</li>
<li class="">Reassess the necessity of the <code>@types/chai</code> pin whenever the Vitest globals conflict is resolved. Needed to pin <code>@types/chai@5.0.1</code> in root <code>package.json</code> overrides section to avoid conflicts with Vitest-provided types when using <code>tsgo</code>.</li>
<li class="">Document any follow-up migration plan before reintroducing new tooling.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_A_fs" id="weekly-reassessment">Weekly Reassessment<a href="#weekly-reassessment" class="hash-link" aria-label="Direct link to Weekly Reassessment" title="Direct link to Weekly Reassessment" translate="no">‚Äã</a></h3>
<ul>
<li class="">Every Monday, review the linked issues to see if the tsgo blockers have advanced toward resolution. Update this ADR and the main <a href="https://github.com/cellixjs/cellixjs" target="_blank" rel="noopener noreferrer" class="">README.md</a>&#x27;s In Progress ADRs section with the new status and any clean-up that becomes relevant.</li>
<li class=""><strong>Schema circular reference (TS4109):</strong> <a href="https://github.com/microsoft/typescript-go/issues/929" target="_blank" rel="noopener noreferrer" class="">Issue 929</a> (monitor the related <a href="https://github.com/microsoft/typescript-go/issues/948" target="_blank" rel="noopener noreferrer" class="">issue 948</a> even though it is closed in case the problem reappears).</li>
<li class=""><strong>Inferred type cannot be named (TS2742):</strong> <a href="https://github.com/microsoft/typescript-go/issues/2220" target="_blank" rel="noopener noreferrer" class="">Issue 2220</a> plus the related reports <a href="https://github.com/microsoft/typescript-go/issues/2233" target="_blank" rel="noopener noreferrer" class="">2233</a> and <a href="https://github.com/microsoft/typescript-go/issues/2277" target="_blank" rel="noopener noreferrer" class="">2277</a>.</li>
<li class=""><strong>tsgo issue queue:</strong> Refer to the <a href="https://github.com/microsoft/typescript-go/issues" target="_blank" rel="noopener noreferrer" class="">TypeScript Go issue tracker</a> as needed to find other relevant bugs that impact our planned migration.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_A_fs" id="remediation-plan-after-typescript-7-ga">Remediation plan after TypeScript 7 GA<a href="#remediation-plan-after-typescript-7-ga" class="hash-link" aria-label="Direct link to Remediation plan after TypeScript 7 GA" title="Direct link to Remediation plan after TypeScript 7 GA" translate="no">‚Äã</a></h3>
<ul>
<li class="">Revisit this ADR and either mark it as superseded or update it with the new migration plan.</li>
<li class="">If tsgo proves stable, reintroduce the necessary configuration changes (plugin, <code>@typescript/native-preview</code>, tsconfig tweaks) while following the previously documented steps for mongoose isolation.</li>
<li class="">Remove any remaining <code>skipLibCheck</code> flags and stub type facades once the official mongoose typings can coexist with tsgo.</li>
<li class="">Unpin <code>@types/chai</code> when the Vitest conflict is fully fixed and the default types align with our usage.</li>
<li class="">Run <code>pnpm run verify</code> again to prove that linting, building, testing, SonarCloud, and Snyk scans pass without requiring temporary compiler workarounds for tsgo.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_A_fs" id="tracking-tsgo-progress">Tracking tsgo progress<a href="#tracking-tsgo-progress" class="hash-link" aria-label="Direct link to Tracking tsgo progress" title="Direct link to Tracking tsgo progress" translate="no">‚Äã</a></h3>
<ul>
<li class="">Keep an eye on the <a href="https://github.com/microsoft/TypeScript-Go?tab=readme-ov-file#what-works-so-far" target="_blank" rel="noopener noreferrer" class="">TypeScript Go README</a> for updates on <code>tsgo</code>/<code>@typescript/native-preview</code> feature parity and resolver improvements so we can reassess the temporary <code>.js</code> import extensions when relevant.</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_wuZO"><a href="https://github.com/CellixJs/cellixjs/tree/main/packages/docs/docs/decisions/0023-tsgo-migration.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_cdk5" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_dljI"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/decisions/snyk-security-integration"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">0022 Snyk Security Integration</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_L4bm thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#context-and-problem-statement" class="table-of-contents__link toc-highlight">Context and Problem Statement</a></li><li><a href="#decision-drivers" class="table-of-contents__link toc-highlight">Decision Drivers</a></li><li><a href="#considered-options" class="table-of-contents__link toc-highlight">Considered Options</a></li><li><a href="#decision-outcome" class="table-of-contents__link toc-highlight">Decision Outcome</a><ul><li><a href="#consequences" class="table-of-contents__link toc-highlight">Consequences</a></li></ul></li><li><a href="#validation" class="table-of-contents__link toc-highlight">Validation</a></li><li><a href="#more-information" class="table-of-contents__link toc-highlight">More Information</a><ul><li><a href="#future-actions" class="table-of-contents__link toc-highlight">Future Actions</a></li><li><a href="#weekly-reassessment" class="table-of-contents__link toc-highlight">Weekly Reassessment</a></li><li><a href="#remediation-plan-after-typescript-7-ga" class="table-of-contents__link toc-highlight">Remediation plan after TypeScript 7 GA</a></li><li><a href="#tracking-tsgo-progress" class="table-of-contents__link toc-highlight">Tracking tsgo progress</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Doc</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/cellixjs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_Vi6i"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/cellixjs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_Vi6i"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/cellixjs" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_Vi6i"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/CellixJs/cellixjs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_Vi6i"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2025 CellixJs, Inc.</div></div></div></footer></div>
</body>
</html>