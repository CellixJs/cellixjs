<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-decisions/monorepo-turborepo" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Monorepo Structure with Turborepo | CellixJs Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://cellixjs.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://cellixjs.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://cellixjs.github.io/docs/decisions/monorepo-turborepo"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Monorepo Structure with Turborepo | CellixJs Docs"><meta data-rh="true" name="description" content="This MADR explains the decision to use a monorepo structure with Turborepo for build optimization and dependency management."><meta data-rh="true" property="og:description" content="This MADR explains the decision to use a monorepo structure with Turborepo for build optimization and dependency management."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://cellixjs.github.io/docs/decisions/monorepo-turborepo"><link data-rh="true" rel="alternate" href="https://cellixjs.github.io/docs/decisions/monorepo-turborepo" hreflang="en"><link data-rh="true" rel="alternate" href="https://cellixjs.github.io/docs/decisions/monorepo-turborepo" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Decisions","item":"https://cellixjs.github.io/docs/category/decisions"},{"@type":"ListItem","position":2,"name":"0019 Monorepo Structure and Turborepo","item":"https://cellixjs.github.io/docs/decisions/monorepo-turborepo"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="CellixJs Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="CellixJs Docs Atom Feed"><link rel="stylesheet" href="/assets/css/styles.207ed739.css">
<script src="/assets/js/runtime~main.777e6e33.js" defer="defer"></script>
<script src="/assets/js/main.0b5abc91.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_DZHR" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="CellixJs Logo" class="themedComponent_HpX9 themedComponent--light_jdcv"><img src="/img/logo.svg" alt="CellixJs Logo" class="themedComponent_HpX9 themedComponent--dark_OC9C"></div><b class="navbar__title text--truncate">Home</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Doc</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/CellixJs/cellixjs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_Vi6i"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_c6nT colorModeToggle_UsFn"><button class="clean-btn toggleButton_yIV_ toggleButtonDisabled_M4O5" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_qZu_ lightToggleIcon_j3iQ"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_qZu_ darkToggleIcon_nh7t"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_qZu_ systemToggleIcon_ngVt"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_hmlT"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_wj2r"><div class="docsWrapper_P1lC"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_ynJV" type="button"></button><div class="docRoot_bBuI"><aside class="theme-doc-sidebar-container docSidebarContainer_ItqY"><div class="sidebarViewport_G2ld"><div class="sidebar_WHnL"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_C6Oa"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro"><span title="Introduction ðŸ‘‹" class="linkLabel_V36a">Introduction ðŸ‘‹</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_XdN1 menu__link menu__link--sublist" href="/docs/category/technical-overview"><span title="Technical Overview" class="categoryLinkLabel_MNj7">Technical Overview</span></a><button aria-label="Expand sidebar category &#x27;Technical Overview&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_XdN1 menu__link menu__link--sublist menu__link--active" href="/docs/category/decisions"><span title="Decisions" class="categoryLinkLabel_MNj7">Decisions</span></a><button aria-label="Collapse sidebar category &#x27;Decisions&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/madr-architecture-decisions"><span title="0001 MADR Architecture Decisions" class="linkLabel_V36a">0001 MADR Architecture Decisions</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/open-telemetry"><span title="0002 Open Telemetry" class="linkLabel_V36a">0002 Open Telemetry</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/domain-driven-design"><span title="0003 Domain Driven Design" class="linkLabel_V36a">0003 Domain Driven Design</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/identity-access"><span title="0004 Identity and Access Control" class="linkLabel_V36a">0004 Identity and Access Control</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/authorization"><span title="0005 Authorization and Access Pattern" class="linkLabel_V36a">0005 Authorization and Access Pattern</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/maps"><span title="0006 Azure Maps Integration Decision" class="linkLabel_V36a">0006 Azure Maps Integration Decision</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/serenityjs"><span title="0007 SerenityJS" class="linkLabel_V36a">0007 SerenityJS</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/white-label"><span title="0008 White Label" class="linkLabel_V36a">0008 White Label</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/cache-purging"><span title="0009 Cache Purging" class="linkLabel_V36a">0009 Cache Purging</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/react-router-loaders"><span title="0010 React Router Loader" class="linkLabel_V36a">0010 React Router Loader</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/bicep"><span title="0011 Bicep" class="linkLabel_V36a">0011 Bicep</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/linter"><span title="0012 Linter Oxlint vs Biome" class="linkLabel_V36a">0012 Linter Oxlint vs Biome</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/test-suite"><span title="0013 Test Suite Selection" class="linkLabel_V36a">0013 Test Suite Selection</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/azure-infrastructure-deployments"><span title="0014 Azure Infrastructure Deployments" class="linkLabel_V36a">0014 Azure Infrastructure Deployments</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/sonarcloud"><span title="0015 SonarCloud Node16 EOL" class="linkLabel_V36a">0015 SonarCloud Node16 EOL</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/adr-template"><span title="ADR Template" class="linkLabel_V36a">ADR Template</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/sonarcloud-code-duplication-checks"><span title="0016 SonarCloud Code Duplication Checks" class="linkLabel_V36a">0016 SonarCloud Code Duplication Checks</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/adr-short-template"><span title="ADR Short Template" class="linkLabel_V36a">ADR Short Template</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/chrome-content-overrides"><span title="0017 Chrome Content Overrides" class="linkLabel_V36a">0017 Chrome Content Overrides</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/docusaurus-azure-pipeline-stages"><span title="0018 Docusaurus Azure Pipeline Stages" class="linkLabel_V36a">0018 Docusaurus Azure Pipeline Stages</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/decisions/monorepo-turborepo"><span title="0019 Monorepo Structure and Turborepo" class="linkLabel_V36a">0019 Monorepo Structure and Turborepo</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/azure-devops-monorepo-pipeline"><span title="0020 Azure DevOps Monorepo Pipeline" class="linkLabel_V36a">0020 Azure DevOps Monorepo Pipeline</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/bicep-resource-scoping-strategy"><span title="0021 Bicep Resource Scoping Strategy" class="linkLabel_V36a">0021 Bicep Resource Scoping Strategy</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/snyk-security-integration"><span title="0022 Snyk Security Integration" class="linkLabel_V36a">0022 Snyk Security Integration</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/tsgo-migration"><span title="0023 TypeScript Go (tsgo) Migration" class="linkLabel_V36a">0023 TypeScript Go (tsgo) Migration</span></a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_BCQ2"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_IiZ_"><div class="docItemContainer_TL3Y"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_AMEB" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_rCj9"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/category/decisions"><span>Decisions</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">0019 Monorepo Structure and Turborepo</span></li></ul></nav><div class="tocCollapsible_N6pK theme-doc-toc-mobile tocMobile_WLr4"><button type="button" class="clean-btn tocCollapsibleButton_ESX_">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Monorepo Structure with Turborepo</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_A_fs" id="context-and-problem-statement">Context and Problem Statement<a href="#context-and-problem-statement" class="hash-link" aria-label="Direct link to Context and Problem Statement" title="Direct link to Context and Problem Statement" translate="no">â€‹</a></h2>
<p>CellixJS is a complex Domain-Driven Design (DDD) application built on Azure Functions with multiple interconnected packages including domain models, API layers, persistence, GraphQL, and UI components. Initially, the codebase was organized in a way that made it difficult to manage dependencies, optimize builds, and maintain consistent development workflows across packages. We needed a scalable approach to:</p>
<ul>
<li class="">Manage shared code and dependencies across multiple packages</li>
<li class="">Optimize build and test performance</li>
<li class="">Maintain consistent tooling and configurations</li>
<li class="">Enable efficient CI/CD pipelines</li>
<li class="">Support both frontend and backend development workflows</li>
</ul>
<p>The challenge was to choose between maintaining separate repositories or consolidating into a monorepo, and selecting appropriate tooling for build orchestration and caching.</p>
<h2 class="anchor anchorTargetStickyNavbar_A_fs" id="decision-drivers">Decision Drivers<a href="#decision-drivers" class="hash-link" aria-label="Direct link to Decision Drivers" title="Direct link to Decision Drivers" translate="no">â€‹</a></h2>
<ul>
<li class=""><strong>Build Performance</strong>: Need for fast incremental builds and efficient caching</li>
<li class=""><strong>Dependency Management</strong>: Shared code and consistent dependency versions across packages</li>
<li class=""><strong>Developer Experience</strong>: Unified development environment and tooling</li>
<li class=""><strong>CI/CD Efficiency</strong>: Selective builds and caching in automated pipelines</li>
<li class=""><strong>Code Organization</strong>: Clear separation between application and library packages, with logical grouping</li>
<li class=""><strong>Scalability</strong>: Ability to add new packages without architectural overhead</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_A_fs" id="considered-options">Considered Options<a href="#considered-options" class="hash-link" aria-label="Direct link to Considered Options" title="Direct link to Considered Options" translate="no">â€‹</a></h2>
<ul>
<li class=""><strong>NPM Workspaces</strong>: Leverage NPM workspaces with typescript project references. Each package in <code>packages/</code> directory</li>
<li class=""><strong>Monorepo with Turborepo</strong>: Focused build orchestration and caching tool. Repository structure following turborepo conventions</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_A_fs" id="decision-outcome">Decision Outcome<a href="#decision-outcome" class="hash-link" aria-label="Direct link to Decision Outcome" title="Direct link to Decision Outcome" translate="no">â€‹</a></h2>
<p>We will use a monorepo structure with Turborepo for build orchestration, caching, and task management. The repository is organized with:</p>
<ul>
<li class=""><code>packages/</code> directory containing shared libraries and domain-specific packages</li>
<li class=""><code>apps/</code> directory containing deployable applications</li>
<li class="">Turborepo configuration for selective builds and dependency management</li>
<li class="">npm workspaces for package management</li>
</ul>
<p>See the following <a href="https://turbo.build/repo/docs/guides/tools" target="_blank" rel="noopener noreferrer" class="">Turborepo documentation</a> for reference.</p>
<h2 class="anchor anchorTargetStickyNavbar_A_fs" id="consequences">Consequences<a href="#consequences" class="hash-link" aria-label="Direct link to Consequences" title="Direct link to Consequences" translate="no">â€‹</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_A_fs" id="positive">Positive<a href="#positive" class="hash-link" aria-label="Direct link to Positive" title="Direct link to Positive" translate="no">â€‹</a></h3>
<ul>
<li class=""><strong>Improved Build Performance</strong>: Turborepo&#x27;s intelligent caching reduces build times by 50-80% for unchanged packages</li>
<li class=""><strong>Selective Execution</strong>: Only affected packages and their dependents are built/tested</li>
<li class=""><strong>Unified Development Environment</strong>: Single repository with consistent tooling and configurations</li>
<li class=""><strong>Efficient CI/CD</strong>: Azure Pipelines integration with selective builds and remote caching</li>
<li class=""><strong>Better Dependency Management</strong>: npm workspaces ensure consistent dependency versions</li>
<li class=""><strong>Clear Code Organization</strong>: Logical separation between domain, application, and infrastructure concerns</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_A_fs" id="negative">Negative<a href="#negative" class="hash-link" aria-label="Direct link to Negative" title="Direct link to Negative" translate="no">â€‹</a></h3>
<ul>
<li class=""><strong>Increased Repository Size</strong>: All packages in one repository can lead to larger clones</li>
<li class=""><strong>Complex Initial Setup</strong>: Turborepo configuration requires careful task dependency management</li>
<li class=""><strong>Learning Curve</strong>: Team needs to understand Turborepo concepts and selective execution</li>
<li class=""><strong>Potential for Tighter Coupling</strong>: Monorepo can encourage tighter coupling between packages</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_A_fs" id="validation">Validation<a href="#validation" class="hash-link" aria-label="Direct link to Validation" title="Direct link to Validation" translate="no">â€‹</a></h2>
<p>The monorepo structure and Turborepo usage is validated through:</p>
<ul>
<li class=""><strong>Build Performance Metrics</strong>: Local builds complete in ~160ms for cached packages</li>
<li class=""><strong>CI/CD Pipeline Efficiency</strong>: PR builds are 30-60% faster due to selective execution</li>
<li class=""><strong>Code Quality Gates</strong>: All packages maintain consistent linting, testing, and coverage standards</li>
<li class=""><strong>Dependency Resolution</strong>: npm workspaces ensure no version conflicts between packages</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_A_fs" id="pros-and-cons-of-the-options">Pros and Cons of the Options<a href="#pros-and-cons-of-the-options" class="hash-link" aria-label="Direct link to Pros and Cons of the Options" title="Direct link to Pros and Cons of the Options" translate="no">â€‹</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_A_fs" id="npm-workspaces">NPM Workspaces<a href="#npm-workspaces" class="hash-link" aria-label="Direct link to NPM Workspaces" title="Direct link to NPM Workspaces" translate="no">â€‹</a></h3>
<ul>
<li class=""><strong>Good</strong>: Built-in to npm, no additional tooling required</li>
<li class=""><strong>Good</strong>: Simple setup with package.json workspaces field</li>
<li class=""><strong>Neutral</strong>: Basic support for linking local packages</li>
<li class=""><strong>Bad</strong>: No advanced build orchestration or caching</li>
<li class=""><strong>Bad</strong>: Limited to package management only</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_A_fs" id="monorepo-with-turborepo">Monorepo with Turborepo<a href="#monorepo-with-turborepo" class="hash-link" aria-label="Direct link to Monorepo with Turborepo" title="Direct link to Monorepo with Turborepo" translate="no">â€‹</a></h3>
<ul>
<li class=""><strong>Good</strong>: Excellent build performance with intelligent caching</li>
<li class=""><strong>Good</strong>: Simple configuration and focused on build orchestration</li>
<li class=""><strong>Good</strong>: Seamless CI/CD integration with remote caching</li>
<li class=""><strong>Good</strong>: Fast and reliable for our package structure</li>
<li class=""><strong>Neutral</strong>: Less code generation features compared to Nx</li>
<li class=""><strong>Bad</strong>: Limited to build/task orchestration (no code generation)</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_A_fs" id="repository-structure">Repository Structure<a href="#repository-structure" class="hash-link" aria-label="Direct link to Repository Structure" title="Direct link to Repository Structure" translate="no">â€‹</a></h2>
<p>The monorepo follows this structure:</p>
<div class="language-text codeBlockContainer_Z3Lw theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_wDPE"><pre tabindex="0" class="prism-code language-text codeBlock_j3w8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_qgUN"><span class="token-line" style="color:#393A34"><span class="token plain">packages/                      # Shared libraries  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ cellix/                    # Shared seedwork libraries for CellixJS applications </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ domain-seedwork/       # Domain modeling base classes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ typescript-config/     # Shared TypeScript configurations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ vitest-config/         # Shared testing configurations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ mock-*                 # Mocking utilities for local development</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ ui-core/               # Shared UI components</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ ocom/                      # Application-specific packages (OwnerCommunity)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ domain/                # Domain models and business logic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ graphql/               # GraphQL schema and resolvers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ persistence/           # Data access layer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ service-*              # Infrastructure services</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   â””â”€â”€ ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apps/                          # Deployable applications </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ api/                       # Azure Functions application (Backend)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ docs/                      # Documentation site (Docusaurus)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€ ui-community/              # React UI application (Frontend)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_A_fs" id="turborepo-configuration">Turborepo Configuration<a href="#turborepo-configuration" class="hash-link" aria-label="Direct link to Turborepo Configuration" title="Direct link to Turborepo Configuration" translate="no">â€‹</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_A_fs" id="task-dependencies">Task Dependencies<a href="#task-dependencies" class="hash-link" aria-label="Direct link to Task Dependencies" title="Direct link to Task Dependencies" translate="no">â€‹</a></h3>
<p>Turborepo manages task execution with dependency graphs:</p>
<div class="language-json codeBlockContainer_Z3Lw theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_wDPE"><pre tabindex="0" class="prism-code language-json codeBlock_j3w8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_qgUN"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;tasks&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;build&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;dependsOn&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;^build&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;outputs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;dist/**&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;build/**&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;test&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;dependsOn&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;^build&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_A_fs" id="selective-execution">Selective Execution<a href="#selective-execution" class="hash-link" aria-label="Direct link to Selective Execution" title="Direct link to Selective Execution" translate="no">â€‹</a></h3>
<ul>
<li class=""><strong>Local Development</strong>: <code>turbo run build</code> builds only affected packages</li>
<li class=""><strong>CI/CD</strong>: Azure Pipelines detects changes and builds selectively</li>
<li class=""><strong>Caching</strong>: Local <code>.turbo</code> directory and remote Azure Cache@2</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_A_fs" id="package-categories">Package Categories<a href="#package-categories" class="hash-link" aria-label="Direct link to Package Categories" title="Direct link to Package Categories" translate="no">â€‹</a></h3>
<p>Packages are categorized by tags for selective deployments:</p>
<ul>
<li class=""><strong>frontend</strong>: UI applications and components</li>
<li class=""><strong>backend</strong>: API, domain, and infrastructure packages</li>
<li class=""><strong>mock</strong>: Local development utilities</li>
<li class=""><strong>config</strong>: Shared configurations</li>
<li class=""><strong>docs</strong>: Documentation</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_A_fs" id="more-information">More Information<a href="#more-information" class="hash-link" aria-label="Direct link to More Information" title="Direct link to More Information" translate="no">â€‹</a></h2>
<ul>
<li class=""><a href="https://turbo.build/repo/docs" target="_blank" rel="noopener noreferrer" class="">Turborepo Documentation</a></li>
<li class=""><a href="https://turborepo.com/docs/crafting-your-repository/structuring-a-repository" target="_blank" rel="noopener noreferrer" class="">Turborepo - Structuring a Repository</a></li>
<li class=""><a href="https://turborepo.com/docs/guides/tools/typescript" target="_blank" rel="noopener noreferrer" class="">Turborepo - Typescript</a></li>
<li class=""><a href="https://docs.npmjs.com/cli/v9/using-npm/workspaces" target="_blank" rel="noopener noreferrer" class="">npm Workspaces</a></li>
<li class=""><a class="" href="/docs/decisions/docusaurus-azure-pipeline-stages">Azure Pipelines Integration</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_wuZO"><a href="https://github.com/CellixJs/cellixjs/tree/main/packages/docs/docs/decisions/0019-monorepo-turborepo.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_cdk5" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_dljI"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/decisions/docusaurus-azure-pipeline-stages"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">0018 Docusaurus Azure Pipeline Stages</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/decisions/azure-devops-monorepo-pipeline"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">0020 Azure DevOps Monorepo Pipeline</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_L4bm thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#context-and-problem-statement" class="table-of-contents__link toc-highlight">Context and Problem Statement</a></li><li><a href="#decision-drivers" class="table-of-contents__link toc-highlight">Decision Drivers</a></li><li><a href="#considered-options" class="table-of-contents__link toc-highlight">Considered Options</a></li><li><a href="#decision-outcome" class="table-of-contents__link toc-highlight">Decision Outcome</a></li><li><a href="#consequences" class="table-of-contents__link toc-highlight">Consequences</a><ul><li><a href="#positive" class="table-of-contents__link toc-highlight">Positive</a></li><li><a href="#negative" class="table-of-contents__link toc-highlight">Negative</a></li></ul></li><li><a href="#validation" class="table-of-contents__link toc-highlight">Validation</a></li><li><a href="#pros-and-cons-of-the-options" class="table-of-contents__link toc-highlight">Pros and Cons of the Options</a><ul><li><a href="#npm-workspaces" class="table-of-contents__link toc-highlight">NPM Workspaces</a></li><li><a href="#monorepo-with-turborepo" class="table-of-contents__link toc-highlight">Monorepo with Turborepo</a></li></ul></li><li><a href="#repository-structure" class="table-of-contents__link toc-highlight">Repository Structure</a></li><li><a href="#turborepo-configuration" class="table-of-contents__link toc-highlight">Turborepo Configuration</a><ul><li><a href="#task-dependencies" class="table-of-contents__link toc-highlight">Task Dependencies</a></li><li><a href="#selective-execution" class="table-of-contents__link toc-highlight">Selective Execution</a></li><li><a href="#package-categories" class="table-of-contents__link toc-highlight">Package Categories</a></li></ul></li><li><a href="#more-information" class="table-of-contents__link toc-highlight">More Information</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Doc</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/cellixjs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_Vi6i"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/cellixjs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_Vi6i"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/cellixjs" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_Vi6i"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/CellixJs/cellixjs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_Vi6i"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2025 CellixJs, Inc.</div></div></div></footer></div>
</body>
</html>